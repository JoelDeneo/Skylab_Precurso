const questions = [
	[
		{
			letter: "a",
			answer: "abducir",
			status: 0,
			question: "CON LA A. \n \n Dicho de una supuesta criatura extraterrestre: Apoderarse de alguien.",
		},
		{
			letter: "a",
			answer: "astronauta",
			status: 0,
			question: "CON LA A. \n \n Persona que tripula una astronave o que está entrenada para este trabajo.",
		},
		{
			letter: "a",
			answer: "amor",
			status: 0,
			question: "CON LA A. \n \n Sentimiento de afecto, inclinación y entrega a alguien o algo.",
		},
	],
	[
		{
			letter: "b",
			answer: "bingo",
			status: 0,
			question: "CON LA B. \n \n Juego que ha sacado de quicio a todos los 'Skylabers' en las sesiones de precurso.",
		},
		{
			letter: "b",
			answer: "brazo",
			status: 0,
			question: "CON LA B. \n \n Miembro del cuerpo que comprende desde el hombro a la extremidad de la mano.",
		},
		{
			letter: "b",
			answer: "bola",
			status: 0,
			question: "CON LA B. \n \n Cuerpo esférico de cualquier materia.",
		},
	],
	[
		{
			letter: "c",
			answer: "churumbel",
			status: 0,
			question: "CON LA C. \n \n Niño, crío, bebé",
		},
		{
			letter: "c",
			answer: "cristal",
			status: 0,
			question: "CON LA C. \n \n Vidrio, especialmente el de alta calidad.",
		},
		{
			letter: "c",
			answer: "culo",
			status: 0,
			question: "CON LA C. \n \n Conjunto de las dos nalgas.",
		},
	],
	[
		{
			letter: "d",
			answer: "diarrea",
			status: 0,
			question: "CON LA D. \n \n Anormalidad en la función del aparato digestivo caracterizada por frecuentes evacuaciones y su consistencia líquida",
		},
		{
			letter: "d",
			answer: "deficiente",
			status: 0,
			question: "CON LA D. \n \n Falto o incompleto.",
		},
		{
			letter: "d",
			answer: "diestro",
			status: 0,
			question: "CON LA D. \n \n Hábil, experto en un arte u oficio.",
		},
	],
	[
		{
			letter: "e",
			answer: "ectoplasma",
			status: 0,
			question: "CON LA E. \n \n Gelatinoso y se encuentra debajo de la membrana plasmática. Los cazafantasmas medían su radiación.",
		},
		{
			letter: "e",
			answer: "emisor",
			status: 0,
			question: "CON LA E. \n \n En un acto de comunicación, persona que enuncia el mensaje.",
		},
		{
			letter: "e",
			answer: "esperanza",
			status: 0,
			question: "CON LA E. \n \n Estado de ánimo que surge cuando se presenta como alcanzable lo que se desea.",
		},
	],
	[
		{
			letter: "f",
			answer: "facil",
			status: 0,
			question: "CON LA F. \n \n Que no requiere gran esfuerzo, capacidad o dificultad.",
		},
		{
			letter: "f",
			answer: "fuerte",
			status: 0,
			question: "CON LA F. \n \n Que tiene gran resistencia.",
		},
		{
			letter: "f",
			answer: "fuego",
			status: 0,
			question: "CON LA F. \n \n Fenómeno caracterizado por la emisión de calor y de luz, generalmente con llama.",
		},
	],
	[
		{
			letter: "g",
			answer: "galaxia",
			status: 0,
			question: "CON LA G. \n \n Conjunto enorme de estrellas, polvo interestelar, gases y partículas.",
		},
		{
			letter: "g",
			answer: "garganta",
			status: 0,
			question: "CON LA G. \n \n Parte anterior del cuello.",
		},
		{
			letter: "g",
			answer: "gol",
			status: 0,
			question: "CON LA G. \n \n En el fútbol y otros deportes, entrada del balón en la portería.",
		},
	],
	[
		{
			letter: "h",
			answer: "harakiri",
			status: 0,
			question: "CON LA H. \n \n Suicidio ritual japonés por desentrañamiento",
		},
		{
			letter: "h",
			answer: "hombre",
			status: 0,
			question: "CON LA H. \n \n Varón que ha llegado a la edad adulta.",
		},
		{
			letter: "h",
			answer: "hurto",
			status: 0,
			question: "CON LA H. \n \n Acción de hurtar.",
		},
	],
	[
		{
			letter: "i",
			answer: "iglesia",
			status: 0,
			question: "CON LA I. \n \n Templo cristiano",
		},
		{
			letter: "i",
			answer: "infantil",
			status: 0,
			question: "CON LA I. \n \n Perteneciente o relativo a la infancia o a los niños.",
		},
		{
			letter: "i",
			answer: "isla",
			status: 0,
			question: "CON LA I. \n \n Porción de tierra rodeada de agua por todas partes.",
		},
	],
	[
		{
			letter: "j",
			answer: "jabali",
			status: 0,
			question: "CON LA J. \n \n Variedad salvaje del cerdo que sale en la película 'El Rey León', de nombre Pumba.",
		},
		{
			letter: "j",
			answer: "jaula",
			status: 0,
			question: "CON LA J. \n \n Armazón, cerrada o no según los casos, hecha con barras o listones y destinada a encerrar generalmente animales.",
		},
		{
			letter: "j",
			answer: "jalapeño",
			status: 0,
			question: "CON LA J. \n \n Natural de Jalapa de Enríquez, capital del estado de Veracruz, en México.",
		},
	],
	[
		{
			letter: "k",
			answer: "kamikaze",
			status: 0,
			question: "CON LA K. \n \n Persona que se juega la vida realizando una acción temeraria",
		},
		{
			letter: "k",
			answer: "kebab",
			status: 0,
			question: "CON LA K. \n \n Masa de carne picada que, ensartada en una varilla, se asa haciéndose girar ante una fuente de calor.",
		},
		{
			letter: "k",
			answer: "kart",
			status: 0,
			question: "CON LA K. \n \n Coche de carreras de pequeño tamaño y poca cilindrada, sin carrocería, caja de cambios ni suspensión.",
		},
	],
	[
		{
			letter: "l",
			answer: "licantropo",
			status: 0,
			question: "CON LA L. \n \n Hombre lobo",
		},
		{
			letter: "l",
			answer: "lunes",
			status: 0,
			question: "CON LA L. \n \n Primer día de la semana.",
		},
		{
			letter: "l",
			answer: "lustro",
			status: 0,
			question: "CON LA L. \n \n Período de cinco años.",
		},
	],
	[
		{
			letter: "m",
			answer: "misantropo",
			status: 0,
			question: "CON LA M. \n \n Persona que huye del trato con otras personas o siente gran aversión hacia ellas.",
		},
		{
			letter: "m",
			answer: "manco",
			status: 0,
			question: "CON LA M. \n \n Que ha perdido un brazo o una mano, o el uso de cualquiera de estos miembros.",
		},
		{
			letter: "m",
			answer: "morder",
			status: 0,
			question: "CON LA M. \n \n Clavar los dientes en algo.",
		},
	],
	[
		{
			letter: "n",
			answer: "necedad",
			status: 0,
			question: "CON LA N. \n \n Demostración de poca inteligencia.",
		},
		{
			letter: "n",
			answer: "nobleza",
			status: 0,
			question: "CON LA N. \n \n Cualidad de noble.",
		},
		{
			letter: "n",
			answer: "navidad",
			status: 0,
			question: "CON LA N. \n \n En el mundo cristiano, festividad anual en la que se conmemora el nacimiento de Jesucristo.",
		},
	],
	[
		{
			letter: "ñ",
			answer: "señal",
			status: 0,
			question: "CONTIENE LA Ñ. \n \n Indicio que permite deducir algo de lo que no se tiene un conocimiento directo.",
		},
		{
			letter: "ñ",
			answer: "caña",
			status: 0,
			question: "CONTIENE LA Ñ. \n \n Tallo de las plantas gramíneas, por lo común hueco y nudoso.",
		},
		{
			letter: "ñ",
			answer: "amañar",
			status: 0,
			question: "CONTIENE LA Ñ. \n \n Preparar o disponer algo con engaño o artificio.",
		},
	],

	[
		{
			letter: "o",
			answer: "orco",
			status: 0,
			question: "CON LA O. \n \n Humanoide fantástico de apariencia terrible y bestial, piel de color verde creada por el escritor Tolkien.",
		},
		{
			letter: "o",
			answer: "osado",
			status: 0,
			question: "CON LA O. \n \n Que tiene osadía.",
		},
		{
			letter: "o",
			answer: "ombligo",
			status: 0,
			question: "CON LA O. \n \n Cicatriz redonda que queda en medio del vientre, después de romperse y secarse el cordón umbilical.",
		},
	],
	[
		{
			letter: "p",
			answer: "protoss",
			status: 0,
			question: "CON LA P. \n \n Raza ancestral tecnológicamente avanzada que se caracteriza por sus grandes poderes psíonicos del videojuego StarCraft.",
		},
		{
			letter: "p",
			answer: "pandilla",
			status: 0,
			question: "CON LA P. \n \n Grupo de amigos que suelen reunirse para divertirse en común.",
		},
		{
			letter: "p",
			answer: "picar",
			status: 0,
			question: "CON LA P. \n \n Cortar o dividir en trozos muy menudos.",
		},
	],

	[
		{
			letter: "q",
			answer: "queso",
			status: 0,
			question: "CON LA Q. \n \n Producto obtenido por la maduración de la cuajada de la leche.",
		},
		{
			letter: "q",
			answer: "quebrar",
			status: 0,
			question: "CON LA Q. \n \n Romper, separar con violencia.",
		},
		{
			letter: "q",
			answer: "quesadilla",
			status: 0,
			question: "CON LA Q. \n \n Cierto género de pastel, compuesto de queso y masa.",
		},
	],

	[
		{ letter: "r", answer: "raton", status: 0, question: "CON LA R. Roedor." },
		{
			letter: "r",
			answer: "ritual",
			status: 0,
			question: "CON LA R.\n \n Perteneciente o relativo al rito.",
		},
		{
			letter: "r",
			answer: "rodar",
			status: 0,
			question: "CON LA R.  \n \n Hacer que un automóvil marche sin rebasar las velocidades prescritas por el fabricante para el rodaje.",
		},
	],

	[
		{
			letter: "s",
			answer: "stackoverflow",
			status: 0,
			question: "CON LA S. \n \n Comunidad salvadora de todo desarrollador informático.",
		},
		{
			letter: "s",
			answer: "sensible",
			status: 0,
			question: "CON LA S. \n \n Dicho de un ser vivo o de uno de sus órganos: Capaz de experimentar sensaciones.",
		},
		{
			letter: "s",
			answer: "silueta",
			status: 0,
			question: "CON LA S. \n \n Dibujo sacado siguiendo los contornos de la sombra de un objeto.",
		},
	],

	[
		{
			letter: "t",
			answer: "terminator",
			status: 0,
			question: "CON LA T. \n \n Película del director James Cameron que consolidó a Arnold Schwarzenegger como actor en 1984.",
		},
		{
			letter: "t",
			answer: "tonto",
			status: 0,
			question: "CON LA T. \n \n Dicho de una persona: Falta o escasa de entendimiento o de razón.",
		},
		{
			letter: "t",
			answer: "titubear",
			status: 0,
			question: "CON LA T. \n \n Oscilar, perdiendo la estabilidad y firmeza.",
		},
	],
	[
		{
			letter: "u",
			answer: "unamuno",
			status: 0,
			question: "CON LA U. \n \n Escritor y filósofo español de la generación del 98 autor del libro 'Niebla' en 1914.",
		},
		{
			letter: "u",
			answer: "usado",
			status: 0,
			question: "CON LA U. \n \n Gastado y deslucido por el uso.",
		},
		{
			letter: "u",
			answer: "umbral",
			status: 0,
			question: "CON LA U.\n \n  Paso primero y principal o entrada de cualquier cosa.",
		},
	],

	[
		{
			letter: "v",
			answer: "vikingos",
			status: 0,
			question: "CON LA V. \n \n Nombre dado a los miembros de los pueblos nórdicos originarios de Escandinavia, famosos por sus incursiones y pillajes en Europa.",
		},
		{
			letter: "v",
			answer: "volar",
			status: 0,
			question: "CON LA V. \n \n Ir o moverse por el aire, sosteniéndose con las alas.",
		},
		{
			letter: "v",
			answer: "viable",
			status: 0,
			question: "CON LA V. \n \n Dicho de un asunto: Que, por sus circunstancias, tiene probabilidades de poderse llevar a cabo.",
		},
	],
	[
		{
			letter: "w",
			answer: "sandwich",
			status: 0,
			question: "CONTIENE LA W. \n \n Emparedado hecho con dos rebanadas de pan entre las cuales se coloca jamón y queso.",
		},
		{
			letter: "w",
			answer: "wasabi",
			status: 0,
			question: "CON LA W. \n \n Raíz de esta planta, de color verde claro, que se utiliza mucho en la cocina japonesa.",
		},
		{
			letter: "w",
			answer: "kawaii",
			status: 0,
			question: "CON LA W. \n \n Adjetivo japonés que puede ser traducido al español como bonito o tierno.",
		},
	],

	[
		{
			letter: "x",
			answer: "botox",
			status: 0,
			question: "CONTIENE LA X. \n \n Toxina bacteriana utilizada en cirujía estética.",
		},
		{
			letter: "x",
			answer: "xenofobia",
			status: 0,
			question: "CON LA X. \n \n Fobia a los extranjeros.",
		},
		{
			letter: "x",
			answer: "xeca",
			status: 0,
			question: "CON LA X. \n \n Pan poco refinado.",
		},
	],
	[
		{
			letter: "y",
			answer: "peyote",
			status: 0,
			question: "CONTIENE LA Y. \n \n Pequeño cáctus conocido por sus alcaloides psicoactivos utilizado de forma ritual y medicinal  por indígenas americanos.",
		},
		{
			letter: "y",
			answer: "kayak",
			status: 0,
			question: "CONTIENE LA Y. \n \n Canoa de pesca usada por los esquimales, tradicionalmente fabricada con piel de foca.",
		},
		{
			letter: "y",
			answer: "ayer",
			status: 0,
			question: "CONTIENE LA Y. \n \n En el día que precede inmediatamente al de hoy.",
		},
	],

	[
		{
			letter: "z",
			answer: "zen",
			status: 0,
			question: "CON LA Z. \n \n Escuela de budismo que busca la experiencia de la sabiduría más allá del discurso racional.",
		},
		{
			letter: "z",
			answer: "zurrar",
			status: 0,
			question: "CON LA Z. \n \n Curtir y adobar las pieles quitándoles el pelo.",
		},
		{
			letter: "z",
			answer: "zumo",
			status: 0,
			question: "CON LA Z.\n \n  Líquido de las hierbas, flores, frutas u otras cosas semejantes, que se saca exprimiéndolas o majándolas.",
		},
	],
];
let _questions = [...questions];
let rankingTable = [];
let name;
let randomNum;
let right = 0;
let i = 0;
let secToPlay = 3;
let secToEnd = 150;
let leaveButton = false;

//PLAY BUTTON
function play() {
	name = document.getElementById("username").value;
	if (name !== null && name !== "") {
		document.getElementById("welcome").style.display = "none";
		document.getElementById("game_interface").style.display = "flex";
		countDown();
	}
	document.getElementById("timer").innerHTML = secToEnd;
}

//CUENTRA ATRÁS + startGame()
function countDown() {
	document.getElementById("question").innerHTML = secToPlay;
	if (secToPlay === 0) {
		document.getElementById("question").innerHTML = "A JUGAR!";
		setTimeout(startGame, 1000);
	} else {
		secToPlay -= 1;
		setTimeout(countDown, 1000);
	}
}

//LIMPIAR + TIMER + nextQuestion()
function startGame() {
	document.getElementById("question").innerHTML = "";
	document.getElementById("question").style.fontSize = "20px";
	document.getElementById("boxanswer").style.display = "block";
	document.getElementById("leave").style.display = "block";
	timer();
	nextQuestion();
}

//TIMER 150SECS - FLUJO DE EVENTOS
function timer() {
	document.getElementById("timer").innerHTML = secToEnd;
	if (leaveButton === true) {
		replaying();
	} else if (_questions[0] === undefined) {
		completedStatus();
	} else if (secToEnd === 0) {
		noMoreTime();
	} else if (secToEnd === 10) {
		document.getElementById("boxtimer").style.backgroundColor = "red";
		secToEnd -= 1;
		setTimeout(timer, 1000);
	} else {
		secToEnd -= 1;
		setTimeout(timer, 1000);
	}
}

//MUESTRA PREGUUNTA EN PANTALLA
function nextQuestion() {
	if (_questions[i][0].status === 0) {
		randomNum = Math.floor(Math.random() * 3);
		document.getElementById("question").innerHTML = _questions[i][randomNum].question;
	}
}

//PASAPALABA BUTTON
function pasapalabra() {
	document.getElementById("answer").value = "pasapalabra";
	comprobation();
}

//RESPONDER BUTTON - ELIMINA PREGUNTA SI ES CONTESTADA + COLOR + nextQuestion()
function comprobation() {
	let color = _questions[i][0].letter;
	if (document.getElementById("answer").value.toLowerCase() === _questions[i][randomNum].answer) {
		_questions.splice(i, 1);
		document.getElementById(color).style.backgroundColor = "green";
		right++;
		document.getElementById("points").innerHTML = right;
	} else if (document.getElementById("answer").value.toLowerCase() === "pasapalabra") {
		i++;
	} else {
		_questions.splice(i, 1);
		document.getElementById(color).style.backgroundColor = "red";
	}
	document.getElementById("answer").value = "";
	if (i === _questions.length) i = 0;
	if (_questions[0] !== undefined) nextQuestion();
}

//RESULT BOX SI SE COMPLETA
function completedStatus() {
	document.getElementById("game_interface").style.display = "none";
	document.getElementById("leave").style.display = "none";
	document.getElementById("result_box").style.display = "flex";
	if (right === 27) {
		document.getElementById("result_status").innerHTML = "Felicidades, has ganado <br> el juego de Pasapalabra!";
	} else {
		document.getElementById("result_status").innerHTML = "Has completado el rosco! <br> Aciértalas todas para ganar.";
	}
	ranking();
}

//RESULT_BOX SI SE ACABA EL TIEMPO
function noMoreTime() {
	document.getElementById("game_interface").style.display = "none";
	document.getElementById("leave").style.display = "none";
	document.getElementById("result_box").style.display = "flex";
	document.getElementById("result_status").innerHTML = "Se ha terminado el tiempo! <br> Vuelve a intentarlo.";
	ranking();
}

//RANKING
function ranking() {
	let rankingUser = (name, right) => ({
		Name: name,
		Rights: right,
		Complete: _checkcompleted(),
	});
	rankingTable.push(rankingUser(name, right));
	rankingTable.sort(function (a, b) {
		return b.Rights - a.Rights;
	});
	for (let i = 0; i < rankingTable.length; i++) {
		document.getElementById("ranking_box").innerHTML += "Jugador: " + rankingTable[i].Name + "	" + "Aciertos: " + rankingTable[i].Rights + "	" + rankingTable[i].Complete + "<br>";
	}
}

//RANKING AUX
function _checkcompleted() {
	if (_questions[0] === undefined) {
		return "Completado";
	} else {
		return "No completado";
	}
}

//RESET VALUES
function reset() {
	_questions = [...questions];
	right = 0;
	i = 0;
	secToPlay = 3;
	secToEnd = 150;
	leaveButton = false;
	_reColor();
}

//AUX RESET
function _reColor() {
	document.getElementById("boxtimer").style.backgroundColor = "blue";
	for (let i = 0; i < questions.length; i++) {
		document.getElementById(questions[i][0].letter).style.backgroundColor = "blue";
	}
}

//PREPARAR VIEW PARA VOLVER A JUGAR
function replaying() {
	document.getElementById("result_box").style.display = "none";
	document.getElementById("boxanswer").style.display = "none";
	document.getElementById("leave").style.display = "none";
	document.getElementById("welcome").style.display = "flex";
	document.getElementById("question").style.fontSize = "50px";
	document.getElementById("question").innerHTML = "";
	document.getElementById("ranking_box").innerHTML = "";
	reset();
}

//BOTON ABANDONAR
function leave() {
	document.getElementById("game_interface").style.display = "none";
	document.getElementById("leave").style.display = "none";
	leaveButton = true;
}

//ASIGNACION DE TECLAS
let enter = document.getElementById("answer");
enter.addEventListener("keyup", function (event) {
	if (event.keyCode === 13) {
		event.preventDefault();
		document.getElementById("answer_button").click();
	}
});

let enter_2 = document.getElementById("username");
enter_2.addEventListener("keyup", function (event) {
	if (event.keyCode === 13) {
		event.preventDefault();
		document.getElementById("play_button").click();
	}
});

let tab = document.getElementById("answer");
tab.addEventListener("keyup", function (event) {
	if (event.keyCode === 32) {
		event.preventDefault();
		document.getElementById("pasapalabra_button").click();
	}
});
